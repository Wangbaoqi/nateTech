---
title: 网络层
---

<Intro>

网络层解决的是两个主机在不同的网络中如何通信的问题。关注的是如何将IP数据报从源主机沿着网络发送到目标主机。

不同的网络有不同的网络层协议和地址规范，如果不能理解另一个网络的协议和规范，则就不能与其进行通信。

网络通信的两种方式，**局域网（MAC地址寻址）** 和 **不同网络（IP地址）**

</Intro>

网络层向上只提供简单灵活的、无连接的、**尽最大努力交付**（虽然并不表示路由器可以任意丢弃分组，但在网络层上的这种交付实质上就是不可靠交付）的数据报服务。

<YouWillLearn>

* 虚拟的互联网络
* 网络的主要作用
* 网际协议IP
* 路由选择协议的工作原理
* 网络拥塞控制

</YouWillLearn>


## 虚拟的互联网络 {/*虚拟的互联网络*/}

我们知道，在实际中所有的网络都是连接到一起的，而这些网络都不尽相同（根据不同的需求划分为不同的网络），其连接是非常复杂的，而连接这些网络中间设备有以下几种：

1. 转发器：物理层使用的
2. 网桥和桥接器：数据链路层使用的
3. 路由器：网络层使用的
4. 网关：网络层以上使用的，用网关连接两个互不兼容的系统需要在高层进行协议转换

当中间设备是转发器或网桥时，这仅仅是把一个网络扩大了，而从网络层的角度看， 这仍然是 一个网络， 一般并不称之为网络互连。网关由于比较复杂，目前使用得较少。因此在讨论网络互连时，都是指用路由器进行网络互连和路由选择。**路由器其实就是一台专用计算机**，用来在互联网中进行路由选择。

而多个计算机通过路由器连接，且这些计算机使用相同的网际协议IP，因此可以把互连的计算机网络可以看成 **虚拟互联网络**。

所谓虚拟互连网络也就是逻辑互连网络，它的意思就是互连起来的各种物理网络的异构性本来是客观存在的，但是我们利用 IP 协议就可以使这些性能各异的网络在网络层上看起来好像是一个统一的网络。

而如果在这种虚拟网络（可简称为IP网）上层使用TCP协议，那就是现在的 **互联网**。

## 网络的主要作用 {/*网络的主要作用*/}


1. 屏蔽网络差异, 提供透明传输

网络层能够解决不同网络之间的通信，使用统一网络通信的规范，使的 **传输层** 就可以在不同网络之间透明传输数据了。

网络层向传输层提供的服务：

- 面向连接的网络服务：虚电路服务
- 无连接的网络服务：数据包服务

2. 网络间通信提供路由选择

根据一定的原则和路由算法在多个节点的通信子网中选择一条到达目的节点的最佳路径

3. 数据包的封装和解封装

对来自传输层的报文的头部添加网络层协议控制信息封装成数据包，数据包的头部包含源节点和目标节点的网络层地址(IP地址)

数据从底层（数据链路层等）到达网络层时，要去掉数据链路层加上的协议信息（帧头和帧尾），还原出原本的数据包格式

4. 拥塞控制

**避免网络传输路径中数据的传输延迟或死锁**

在数据链路层提到了**流量控制功能**，那是针对**数据链路中点对点传输速率的控制**

而这里的拥塞控制是针对在**网络传输路径中的端到端传输效率的控制**（如避免路由器缓存空间爆满而造成丢包的情况）。



https://zhuanlan.zhihu.com/p/470493698

