---
sidebar_position: 1
---

import ProcessOn from '@site/src/components/ProcessOn';


# 基础概念及术语

## 概念

计算机网络是将计算机连接到一起以实现它们之间的**通信**以及**数据交换**的实践。通常，计算机网络是两台或者
多台计算机的集合，其可以帮助用户更轻松的进行交流。

**如何工作的？**

计算机网络的基本构建块是**节点**和**链接**。

- **节点**可以解释为数据通信设备，比如路由器、数据终端设备。
- **链接**可以解释为网线或者电缆或者 WIFI。

而计算机的工作可以简单的理解为**规则**或者**协议**，而规则和协议有助于计算机网络进行通信的链接发送和接收。
每一个设备都有唯一的 IP 地址，有助于设备识别。

## 发展历史

- 第一阶段：单个网络 ARPANET - 交换机
- 第二阶段：三级结构互联网 - 主干网 - 地区网 - 校园网
- 第三阶段：多层次 ISP 互联网 - 主干 ISP(移动) - 地区 ISP(上海移动) - 公司、校园、家庭

**中国互联网发展历史**

- 第一阶段: 1980 互联网实验
- 第二阶段: 1989 第一个公共网络建立运行
- 第三阶段: 1994 接入国际互联网

## 术语

- 网络：是连接在一起以实现通信和数据交换的计算机和设备的集合。
- 节点：是连接到网络的设备。比如计算机、服务器、手机、打印机、路由器、交换机等。
- 协议：是一组规则和标准，用于管理数据在网络上的传输方式。比如*TCP/IP*、*HTTP*以及*IP*。
- 拓扑：网络拓扑是指网络上节点的物理和逻辑排列。常见的有总线、星形、网状和树状。
- 服务提供商网络(ISP)：这些类型的网络允许从提供商租赁网络容量和功能。
- IP地址: IP 地址是分配给网络上每个设备的唯一数字标识符。
- DNS: 域名系统(DNS)是一种协议，用于将域名解析为 IP 地址。
- 防火墙：是一种安全设备，用于简史和控制传入和传入的网络流量。

## 网络类型

- LAN: 局域网是覆盖小范围的网络。比如办公室、校园网等。
- WAN: 广域网是覆盖较大范围的网络。比如城市, 国家甚至全世界, WAN 用于将 LAN 连接到一起。
- 云网络：可以通过 WAN 进行可视化，它们可以托管到公共或者私有云服务提供商上。
- 开发系统：连接到网络并准备好进行通信的系统。
- 封闭系统：不与网络连接，无法进行通信的系统。

## 体系结构的类型

- C/S 架构：客户端-服务端架构是一种计算机网络架构，其中节点可以是服务器或客户端，这里服务端可以管理客户端节点行为。
- P2P 架构：点对点架构，没有任何中央服务器的概念，每个设备都可以免费用作客户端或者服务器。

## 网络设备 

网络设备是多个设备（也称为主机）的互连，这些设备使用多条路径连接以发送/接收数据或媒体。计算机网络还可以包括多个设备/媒体，
它们有助于两个不同设备之间的通信；这些被称为网络设备，包括路由器、交换机、集线器和网桥等设备。

- 中继器
- 集线器
- 网桥
- 交换机
- 路由器
- 网关
- Brouter
- NIC

**中继器**在物理层运行。它的工作是在信号变得太弱或损坏而无法延长信号可以通过同一网络传输的长度之前，
通过同一网络重新生成信号。关于中继器需要注意的重要一点是它们不仅放大信号而且重新生成信号。
当信号变弱时，他们会一点一点地复制它，并按照原始强度在其连接的星形拓扑连接器处重新生成它。它是一个 2 端口设备。

**集线器**基本上是一个多端口中继器。集线器连接来自不同分支的多条电线，例如连接不同站点的星形拓扑中的连接器。
集线器无法过滤数据，因此数据包会发送到所有连接的设备。也就是说，所有通过Hub连接的主机的冲突域都保持为一个。
此外，他们没有智能来找出数据包的最佳路径，从而导致效率低下和浪费。

**网桥**运行在数据链路层。网桥是一个中继器，增加了通过读取源和目标的 MAC 地址来过滤内容的功能。
它还用于互连两个使用相同协议的 LAN。它有一个单一的输入和单一的输出端口，从而使它成为一个 2 端口设备。

**交换机**是一个带有缓冲区的多端口桥，其设计可以提高其效率（大量端口意味着较少的流量）和性能。
交换机是数据链路层设备。交换机可以在转发数据之前执行错误检查，这使得它非常有效，因为它不会转发有错误的数据包，
而是有选择地只将好的数据包转发到正确的端口。换句话说，交换机划分了主机的冲突域，但广播域保持不变。 

**路由器**是一种类似于交换机的设备，它根据数据包的 IP 地址来路由数据包。路由器主要是网络层设备。
路由器通常连接 LAN 和 WAN，并有一个动态更新的路由表，它们根据该表决定路由数据包。路由器划分通过它连接的主机的广播域。

**网关**是连接两个可能工作在不同网络模型上的网络的通道。它们充当信使代理，从一个系统获取数据、解释数据并将其传输到另一个系统。
网关也称为协议转换器，可以在任何网络层运行。网关通常比交换机或路由器更复杂。网关也称为协议转换器。 

**Brouter**也称为桥接路由器，是一种结合了网桥和路由器功能的设备。它既可以工作在数据链路层，也可以工作在网络层。
作为路由器，它能够跨网络路由数据包；作为网桥，它能够过滤局域网流量。 

**NIC**或网络接口卡是用于将计算机连接到网络的网络适配器。它安装在计算机中以建立局域网。
它有一个写在芯片上的唯一 ID，它有一个连接器来连接电缆。电缆充当计算机与路由器或调制解调器之间的接口。
NIC卡是第2层设备，这意味着它可以在网络模型的物理层和数据链路层上工作。 


## 网络拓扑类型

在计算机网络中，各种组件通过不同的方式连接。网络拓扑是定义结构以及各种组件如何相互连接的方式。

通常有以下拓扑类型：

- 点对点拓扑
- 网状拓扑
- 星状拓扑
- 总线拓扑
- 环形拓扑
- 树形拓扑
- 混合拓扑


### 点对点拓扑

点对点拓扑(P2P)是一种适用于发送方和接收方功能的拓扑，是两个节点之间的简单的拓扑，点对点提供高带宽。

![p2p](https://media.wangbaoqi.tech/assets/blog/network/basic/p2p-topology.png)

### 网状拓扑

**网状拓扑(Mesh)**中，每个设备通过特定的方式连接到另一个设备，使用的协议有`AHCP`(Ad Hoc Configuration Protocol),`DHCP`(Dynamic Host Configuration Protocol)等。

![mesh](https://media.wangbaoqi.tech/assets/blog/network/basic/mesh-topology.png)

每个设备都通过专用通道连接到另一个设备，这些通道被也是链接。

:::tip

- 假设, N个设备在Mesh拓扑中相互连接, 每个设备需要的**端口号**为`N - 1`。整个拓扑中, 所需的端口总数为`N * (N - 1)`。
- 假设, N个设备在Mesh拓扑中相互连接, 所需的链路总数`N*(N-1)/2`, 上图中则所需要的链路为10条。

:::

Mesh topology的优点: 

- 节点之间的通信速度非常快
- mesh topology结构是健壮的
- 故障容易诊断，数据是可靠的, 因为数据是通过专门的链路来传输的。
- 提供安全和隐私

Mesh topology的缺点: 

- 安装和配置困难。
- 需要大量布线，电缆成本很高，适用于较少数量的设备。
- 维护成本高。

Mesh Topology的一个常见示例是互联网骨干网, 其中各种互联网服务提供商通过专用通道相互连接。

### 总线拓扑 

**总线拓扑**是一种网络类型, 其中每个设备都连接到一根*电缆*, 是双向的并且是一个多点连接非健壮的拓扑，如果主干发生故障，
整个拓扑就会奔溃。

![bus](https://media.wangbaoqi.tech/assets/blog/network/basic/bus-topology.png)

:::tip

具有共享主干电缆的总线拓扑。节点通过支线连接到通道

:::

总线拓扑的优点:

- 如果 N 台设备在总线拓扑中相互连接，则连接它们所需的电缆数量为 1，称为主干电缆，需要 N 条支线。
- 同轴或双绞线电缆主要用于支持高达 10 Mbps 的基于总线的网络。
- 与其他拓扑结构相比，电缆的成本较低，但它用于构建小型网络。
- 总线拓扑是熟悉的技术，因为安装和故障排除技术是众所周知的。
- CSMA是此类拓扑最常用的方法。

总线拓扑的缺点:

- 总线拓扑非常简单，但仍然需要大量布线。
- 如果公共电缆发生故障，则整个系统将崩溃。
- 如果网络流量很大，则会增加网络中的冲突。为了避免这种情况，MAC 层使用了各种协议，如 Pure Aloha、Slotted Aloha、CSMA/CD 等。
- 向网络中添加新设备会减慢网络速度。
- 安全性非常低。

### 星形拓扑

**星形拓扑**所有设备都通过电缆连接到一个集线器。这个集线器是中心节点，所有其他节点都连接到中心节点。集线器本质上可以是被动的，即不是智能集线器，

![star](https://media.wangbaoqi.tech/assets/blog/network/basic/star-topology.png)

星型拓扑的优点:

- 如果N台设备以星形拓扑相互连接，则连接它们所需的电缆数量为N。因此，它很容易设置。
- 每个设备只需要 1 个端口即连接到集线器，因此所需的端口总数为 N。
- 它很稳健。如果一个链接失败，只有那个链接会影响，而不是其他链接。
- 便于故障识别和故障隔离。
- 星形拓扑结构具有成本效益，因为它使用廉价的同轴电缆。

星形拓扑的缺点:

- 如果整个拓扑所依赖的集中器（集线器）发生故障，整个系统就会崩溃。
- 安装成本高。
- 性能基于单个集中器，即集线器。
- 星型拓扑的一个常见示例是办公室中的局域网 (LAN)，其中所有计算机都连接到中央集线器。此拓扑还用于所有设备都连接到无线接入点的无线网络。

### 环形拓扑

在环形拓扑结构中，它形成一个环形连接设备，恰好有两个相邻设备。节点数较多的环形拓扑使用了多个中继器，
因为如果有人要向100个节点的环形拓扑中的最后一个节点发送一些数据，那么数据将要经过99个节点才能到达第100个节点。
因此，为了防止数据丢失，在网络中使用了中继器。

数据在一个方向上流动，即它是单向的，但它可以通过在每个网络节点之间有2个连接来实现双向，它被称为双环拓扑。
In-Ring Topology，工作站使用令牌环传递协议来传输数据。

![ring](https://media.wangbaoqi.tech/assets/blog/network/basic/ring-topology.png)

环形拓扑最常见的访问方式是令牌传递。

- 令牌传递：是一种将令牌从一个节点传递到另一个节点的网络访问方式。
- Token：是一种在网络中流通的框架。

环形拓扑的操作
- 一个站被称为监视站，它承担执行操作的全部责任。
- 为了传输数据，站点必须持有令牌。传输完成后，令牌将被释放以供其他站点使用。
- 当没有站点在传输数据时，令牌将在环中循环。
- 有两种类型的令牌释放技术：早期令牌释放在传输数据后立即释放令牌，延迟令牌释放在从接收方收到确认后释放令牌。

环形拓扑的优点
- 数据传输是高速的。
- 在这种类型的拓扑中，冲突的可能性很小。
- 安装和扩展便宜。
- 它比星型拓扑成本更低。

环形拓扑的缺点
- 网络中单个节点的故障可能导致整个网络的故障。
- 此拓扑中的故障排除很困难。
- 在中间添加站点或删除站点可能会扰乱整个拓扑。
- 不太安全。 

### 树形拓扑

此拓扑是星形拓扑的变体。此拓扑具有分层数据流。在Tree Topology中，使用了 DHCP 和 SAC（标准自动配置）等协议。

![tree](https://media.wangbaoqi.tech/assets/blog/network/basic/tree-topology.png)

:::info

如图，在这种情况下，各种辅助集线器连接到包含中继器的中央集线器。该数据从上到下流动，即从中央集线器到辅助集线器，
然后到设备或从底部到顶部，即设备到辅助集线器，然后到中央集线器。它是一个多点连接和非健壮的拓扑，
因为如果骨干发生故障，拓扑就会崩溃。

:::

树拓扑的优点
- 它允许将更多设备连接到单个中央集线器，从而减少信号到达设备的距离。
- 它允许网络被隔离，并且还可以优先考虑不同的计算机。
- 我们可以向现有网络添加新设备。
- 在树形拓扑中错误检测和纠错非常容易。

树拓扑的缺点
- 如果中央集线器发生故障，整个系统就会失败。
- 由于布线成本高。
- 如果添加了新设备，则很难重新配置。
- 树形拓扑的一个常见示例是大型组织中的层次结构。树的顶端是 CEO，他连接到公司的不同部门或部门（子节点）。每个部门都有自己的层次结构，经理负责监督不同的团队（孙节点）。团队成员（叶节点）位于层次结构的底部，与各自的经理和部门相连。

### 混合拓扑

这种拓扑技术是我们上面研究的所有各种类型的拓扑的组合。当节点可以自由采用任何形式时，使用混合拓扑。
这意味着这些可以是单独的，例如环形或星形拓扑，也可以是上面看到的各种类型拓扑的组合。每个单独的拓扑都使用前面讨论过的协议。

![hybrid](https://media.wangbaoqi.tech/assets/blog/network/basic/hybrid-topology.png)

混合拓扑的优点：
- 这种拓扑非常灵活。
- 通过添加新设备可以轻松扩展网络规模。

混合拓扑的缺点：
- 设计混合网络的架构具有挑战性。
- 此拓扑中使用的集线器非常昂贵。
- 基础设施成本非常高，因为混合网络需要大量布线和网络设备。
- 混合拓扑的一个常见示例是大学校园网络。该网络可能具有星形拓扑结构的骨干网，每个建筑物都通过交换机或路由器连接到骨干网。
在每个建筑物内，可能有连接不同房间和办公室的总线或环形拓扑结构。无线接入点还为无线设备创建网状拓扑。这种混合拓扑允许不同建筑物之间的高效通信，同时在每个建筑物内提供灵活性和冗余。


## 现代互联网的拓扑

**边缘部分 - 家庭**

手机
电脑 ---> 路由器 ---> 网关 ---> 地区的 ISP
智能设备

**边缘部分 - 企业**

手机
电脑 ---> 路由器 ---> 网关 ---> 网关  
智能设备  
 ---> 统一网关 ---> 地区的 ISP
手机  
电脑 ---> 路由器 ---> 网关 ---> 网关
智能设备

**核心部分**

地区 ISP 地区 ISP
地区 ISP ---> 主干 ISP 路由器 <--- 主干 ISP 地区 ISP
地区 ISP 地区 ISP

**树状结构**

                           主干ISP
                主干ISP                主干ISP
          地区ISP      地区ISP   地区ISP       地区ISP
    公司     ...              校园                   家庭


## 网络层级结构

### 分层设计原则

1. 各层之间是相互独立的
2. 每一层有足够的灵活性
3. 各层之间完全解耦

### OSI七层模型

**初衷**

- OSI 欲成为全球计算机都遵循的标准
- OSI 在市场化过程中困难重重，TCP/P 在全球范围成功运行
- OSI 最终并没有成为广为使用的标准模型

**失败原因**

- OSI 的专家缺乏实际经验
- OSI 标准制定周期过长，按 OSI 标准生产的设备无法及时进入市场
- OSI 模型设计的并不合理，一些功能在多层中重复出现

**七层模型**

- **应用层** - 为计算机用户提供接口和服务
- **表示层** - 数据处理（编码解码、加密解密等）
- **会话层** - 管理（建立、维护、重连）通信会话
- **传输层** - 管理端到端的通信连接
- **网络层** - 数据路由（决定数据在网络的路径）
- **数据链路层** - 管理相邻节点之间的数据通信
- **物理层** - 数据通信的光电物理特性


### TCP/IP四层模型

- **应用层**(应用层、表示层、会话层) - HTTP FTP
- **传输层** - TCP UDP
- **网络层** - IP ICMP
- **网络接口层**(数据链路层、物理层) - Ethernet/ARP/RARP


## 网络唯一标识符

- 主机名：
- Id Adress:
- MAC Address
- Port:
- 套接字
- DNS服务器
- ARP/RARP



## 网络的目标


### 网络元素


### 网络标准

- 性能
- 可靠性
- 安全
- 网络拓扑


**电信拉的 100M 光纤，为什么测试峰值只有 12M 每秒**

网络常用单位 **Mbps**

100M/s = 100Mbps == 100Mbit/s
100Mbit/s = (100/8)MB/s = 12.5MB/s

**bps = bit/s**

## 时延

1. 发送时延

发送时延 = 数据长度(bit)/发送速率(bit/s)

2. 传播时延

传播时延 = 传输路径举例/传播速率(bit/s)

3. 排队时延

数据包在网络设备中等待被处理的时间

4. 处理时延

数据包到达设备或者目的机器被处理所需要的时间

总时延 = 发送时延 + 传播时延 + 排队时延 + 处理时延

5. **RTT**

RTT(Route-Trip Time)是评估网络质量的一项重要指标

RTT 表示的是数据报文在端到端通信中的来回一次的时间

ping 查看 RTT

## 物理层概述

### 物理层的作用

1. 连接不同的物理设备
2. 传输比特流

**介质**

1. 双绞线
2. 同轴电缆
3. 光纤
4. 遥控器
5. 无线
6. 激光

**比特流**： 010101010001001

### 信道的基本概念

- 信道是往一个方向传输信息的媒体
- 一条通信电路包含一个接收信道和一个发送信道

**分类**

- 单工通信信道

只能往一个方向通信，没有反方向反馈的信道，比如优先电视、无线电收音机

- 半双工通信信道

双方都可以发送和接收信息
不能同时发送，也不能同时接收

- 全双工通信信道

双方都可以同时发送和接收信息

### 分用/复用技术

**复用**

频分复用
时分复用
波分复用
码分复用

**分用**

## 数据链路层

解决问题：

1. 封装成帧

- "帧〞是数据链路层数据的基本单位
- 发送端在网络层的一段数据前后添加特定标记形成“帧”
- 接收端根据前后特定标记识别出“帧"

2. 透明传输

- "透明〞在计算机领域是非常重要的一个术语
- 〞一种实际存在的事物却又看起来不存在一样"
- "即是控制字符在帧数据中，但是要当做不存在的去处理”

3. 差错检测

- 物理层只管传输比特流，无法控制是否出错
- 数据链路层负责起“差错监测〞的工作

### 差错检测

1. 奇偶校验码

目的为了传输比特流的时候检测比特流是否错误

局限性：不完备

2. 循环冗余校验码 CRC

- —种根据传输或保存的数据而产生固定位数校验码的方法
- 检测数据传输或者保存后可能出现的错误
- 生成的数字计算出来并且附加到数据后面

**模 2 除法**

- 模“2〞除法是二进制下的除法
- 与算术除法类似，但除法不借位，实际是“异或”操作

### MTU

- MTU（Maximum Transmission Unit）最大传输单元
- 数据链路层的数据帧也不是无限大的
- 数据帧过大或者过小都会影响传输的效率

**一般以太网 MTU 为 1500 字节**

### 路径 MTU

手机 A --> 小型网络 --> 小型网络 --> 小型网络 --> 手机 B
1500 1498 4488 1500

路径 MTU 由链路中 MTU 的最小值决定

### 以太网协议

**MAC 地址**

- 物理地址硬件地址
- 每一个设备都用唯一的 MAC 地址
- MAC 地址 48 位, 30-B4-9E-ED-85-CA

**以太网协议**

- 以太网(Ethernet)是一种使用广泛的局域网技术
- 以太网是一种应用于数据链路层的协议
- 使用以太网可以完成相邻设备的数据帧传输

目的地址 源地址 类型 帧数据 CRC
6 6 2 46~1500 4

MAC 地址表是路由器传输数据的映射表

## 参考

- [computer network RoadMap](https://www.geeksforgeeks.org/computer-network-tutorials/)
