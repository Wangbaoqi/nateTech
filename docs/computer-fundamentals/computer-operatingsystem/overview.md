---
sidebar_position: 1
---

# 操作系统

操作系统是管理计算机软硬件资源的**计算机程序**

管理配置内存、决定资源供需顺序、控制输入输出设备等

提供了用户和操作系统操作的GUI界面

操作系统是管理硬件、提供用户交互的软件系统

**基本功能**

1. 处理器资源
2. 存储器资源
3. IO设备资源
4. 文件资源

**并发性**

并行：两个或者多个事件同一时刻发生
并发：两个或者多个事件同一时间间隔发生

**共享性**

操作形同中的资源可以提供给多个并发的程序使用。

多个程序可以同事使用主存资源

**虚拟性**

表现为把一个物理实体转变为若干个逻辑实体
虚拟技术主要为**时分复用技术**和**空分复用技术**

时分复用技术：
资源在时间上进行复用，不同程序并发使用
多道程序分时使用计算机的硬件资源
提高资源的利用率

空分复用技术:
空分复用技术用来实现虚拟磁盘、虚拟内存等
提高资源的利用率，提升编程效率

**异步性**

在多道程序环境下，允许多个进程并发执行
进程在使用资源时可能需要等待或放弃
进程的执行并不是一气呵成的，而是以走走停停的形式推进


## 进程

### 进程管理之进程实体

**为什么需要进程**

进程是系统进行资源分配和调度的基本单位
进程作为程序独立运行的载体保障程序正常执行
进程的存在使得操作系统资源的利用率大幅提升

**进程的实体**

主存中的进程形态：
1. 状态 - 标记进程的进程状态，如：运行态
2. 标识符 - 标识符唯一标记一个进程，用于区别其他进程
3. 优先级
4. 程序计数器 - 进程即将被执行的下一条指令的地址
5. 内存指针 - 程序代码、进程数据相关指针
6. 上下文数据 - 进程执行时处理器存储的数据
7. IO状态信息 - 被进程IO操作所占用的文件列表
8. 记账信息 - 使用处理器时间、时钟数总和等
9. ...

形态分类：
1. 进程标识符
2. 处理机状态
3. 进程调度信息
4. 进程控制信息
  
**进程控制块PCB**

用于描述和控制进程运行的通用数据结构
记录进程当前状态和控制进程运行的全部信息
PCB的使得进程是能够独立运行的基本单位
PCB是操作系统进行调度经常会被读取的信息
PCB是常驻内存的，存放在系统专门开辟的PCB区域内

**进程与线程**

进程 (Process)

线程 (Thread)

线程是操作系统进行运行调度的最小单位
包含在进程之中，是进程中实际运行工作的单位
一个进程可以并发多个线程，每个线程执行不同的任务
线程是共享进程的资源


### 进程管理之五状态模型

1. **就绪**

当进程被分配到除CPU以外所有必要的资源后
只要再获得CPU的使用权，就可以立即运行
其他资源都准备好、只差CPU资源的状态为就绪状态
在一个系统中多个处于就绪状态的进程通常排成一个队列

2. **执行**

进程获得CPU，其程序正在执行称为执行状态
在单处理机中，在某个时刻只能有一个进程是处于执行状态

3. **阻塞**

进程因某种原因如：其他设备未就绪而无法继续执行
从而放弃CPU的状态称为阻塞状态

4. 创建

创建进程时拥有PCB但其他资源尚未就绪的状态称为创建状态

- 分配PCB
- 插入就绪队列

5. 终止

进程结束由系统清理或者归还PCB的状态称为终止状态

- 系统清理
- PCB归还


### 进程管理之进程同步

1. why 需要进程同步

- 生产值-消费者问题
- 哲学家进餐问题

对竞争资源在多进程间进行使用次序的协调
使得并发执行的多个进程之间可以有效使用资源和相互合作

1. 同步的原则

临界资源指的是一些虽作为共享资源却又无法同时被多个线程共同
访问的共享资源。当有进程在使用临界资源时，其他进程必须依据
操作系统的同步机制等待占用进程释放该共享资源才可重新竞争使
用共享资源。

空闲让进：资源无占用，允许使用
忙则等待：资源有占用，请求进程等待
有限等待：保证有限等待时间能够使用资源
让权等待：等待时，进程需要让出CPU


3. 进程间同步的方法

消息队列
共享存储
信号量

4. 线程同步的方法

互斥量
读写锁
自旋锁
条件变量

### Linux 进程管理

1. Linux 进程概念

- 前台进程
- 后台进程
- 守护进程

进程一般以`d`结束的都是守护进程，比如`sshd`

2. linux 命令

- ps
- top
- kill


